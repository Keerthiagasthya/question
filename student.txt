<%@ Master Language="C#" MasterPageFile="~/Company.Master" AutoEventWireup="true" CodeBehind="Students.master.cs" Inherits="Question1_ASP.net_Demo.Students" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="cphMaster" runat="server">
<table>
        <tr>
               <td style="vertical-align:top;" class="auto-style6">
                      <ul>
                          <li>
                              <asp:HyperLink runat="server" NavigateUrl="~/Stud_Display.aspx" Text="Student Display"></asp:HyperLink>
                          </li>
                          <li>
                              <asp:HyperLink runat="server" NavigateUrl="~/Stud_Add.aspx"  Text="Student Add"></asp:HyperLink>
                          </li>
                          <li>
                              <asp:HyperLink runat="server" NavigateUrl="~/Stud_Delete.aspx"  Text="Student Delete"></asp:HyperLink>
                          </li>
                          <li>
                              <asp:HyperLink runat="server" NavigateUrl="~/Stud_Update.aspx" Text="Student Update"></asp:HyperLink>
                          </li>
                      </ul>   
                    </td>
                     <td colspan="3" class="auto-style1" style="background-color:cornsilk; width:80%; vertical-align:top" >
                         <asp:ContentPlaceHolder runat="server" ID="cphStud">
                         </asp:ContentPlaceHolder>
                    </td>
                </tr>
    </table>
</asp:Content>





//student add

<%@ Page Title="" Language="C#" MasterPageFile="~/Students.master" AutoEventWireup="true" CodeBehind="Stud_Add.aspx.cs" Inherits="Question1_ASP.net_Demo.Stud_Add" %>
<asp:Content ID="Content1" ContentPlaceHolderID="cphStud" runat="server">

    <table>
        <tr>
            <td><h1>Add Studnet</h1></td>
        </tr>
        <tr>
            <td>
                <asp:Label runat="server" Text="Student Code" />
            </td>
            <td><asp:TextBox TextMode="Number" runat="server" ID="txtStudId"></asp:TextBox></td>
            </tr>
        <tr>
            <td><asp:Label runat="server" Text="Student Name" /></td>
            <td><asp:TextBox  runat="server" ID="txtStudName"></asp:TextBox></td>
        </tr>
        <tr>
            <td><asp:Label runat="server" Text="Student Dept Code" /></td>
            <td><asp:TextBox TextMode="Number" runat="server" ID="txtStudDeptCode"></asp:TextBox></td>
        </tr>
        <tr>
            <td><asp:Label runat="server" Text="Student DOB" /></td>
            <td><asp:TextBox TextMode="Date" runat="server" ID="txtStudDob"></asp:TextBox></td>
        </tr>
        <tr>
            <td><asp:Label runat="server" Text="Student Address:" /></td>
            <td><asp:TextBox  runat="server" ID="txtStdAdd"></asp:TextBox></td>
        </tr>
        <tr>
            <td>
                <asp:Button runat="server" ID="btnAdd" Text="Add Student" OnClick="btnAdd_Click" />
            </td>
        </tr>
    </table>
</asp:Content>





///studentaddcs


using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

namespace Question1_ASP.net_Demo
{
    public partial class Stud_Add : System.Web.UI.Page
    {
        SqlConnection conn = null;
        SqlDataReader dr = null;
        SqlCommand cmd = null;

        public Stud_Add()
        {
            conn = new SqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString);
            cmd = new SqlCommand();
            
        }
        protected void Page_Load(object sender, EventArgs e)
        {
            

        }


        public void AddStudent()
        {
            try
            {
                cmd = new SqlCommand("INSERT INTO STUDENT_MASTER VALUES(@id,@sname,@deptCode,@sDob,@sAdd)", conn);
                
                cmd.Parameters.AddWithValue("@id", Convert.ToInt32(txtStudId.Text));
                cmd.Parameters.AddWithValue("@sname", txtStudName.Text);
                cmd.Parameters.AddWithValue("@sDob", Convert.ToDateTime(txtStudDob.Text));
                cmd.Parameters.AddWithValue("@deptCode", Convert.ToInt32(txtStudDeptCode.Text));
                cmd.Parameters.AddWithValue("@sAdd", txtStdAdd.Text);
                conn.Open();
                int recAffected=cmd.ExecuteNonQuery();

                
            if(recAffected>0)
            {
                Response.Write("<script type='text/javascript'>alert('Student Record Inserted Successfully')</script>");
                

            }
            else
            {
                Response.Write("<script type='text/javascript'>alert('Student Record Not Inserted Successfully')</script>");
            }  
                
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
            }
            finally
            {
                if (conn.State == System.Data.ConnectionState.Open)
                    conn.Close();
            }

        }

        protected void btnAdd_Click(object sender, EventArgs e)
        {
            AddStudent();
        }
    }
}




//studentupdate


<%@ Page Title="" Language="C#" MasterPageFile="~/Students.master" AutoEventWireup="true" CodeBehind="Stud_Update.aspx.cs" Inherits="Question1_ASP.net_Demo.Stud_Update" %>
<asp:Content ID="Content1" ContentPlaceHolderID="cphStud" runat="server">
     <table>
        <tr>
            <td><h1>UPDATE Student</h1></td>
        </tr>
        <tr>
            <td>
                <asp:Label runat="server" Text=" Enter Student Code" />
            </td>
            <td><asp:TextBox TextMode="Number" runat="server" ID="txtStudId"></asp:TextBox></td>
            </tr>
        <tr>
            <tr>
            <td>
                <asp:Label runat="server" Text=" Enter Student Name" />
            </td>
            <td><asp:TextBox runat="server" ID="txtStudName"></asp:TextBox></td>
            </tr>
        <tr>
            <td>
                <asp:Button runat="server" ID="btnUpdateStud" OnClick="btnUpdateStud_Click" Text="Update Student" />
            </td>
            </tr>
  </table>
</asp:Content>






//cs

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

namespace Question1_ASP.net_Demo
{
    public partial class Stud_Update : System.Web.UI.Page
    {
        SqlConnection conn = null;
        SqlDataReader dr = null;
        SqlCommand cmd = null;
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public Stud_Update()
        {
            conn = new SqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString);
            cmd = new SqlCommand();
        }

        protected void btnUpdateStud_Click(object sender, EventArgs e)
        {
            Update();
        }

        public void Update()
        {
            try
            {
                cmd = new SqlCommand("UPDATE STUDENT_MASTER SET STUD_NAME=@stud_name WHERE STUD_CODE = @id", conn);

                cmd.Parameters.AddWithValue("@id", Convert.ToInt32(txtStudId.Text));
                cmd.Parameters.AddWithValue("@stud_name", txtStudName.Text);
                conn.Open();
                int recAffected = cmd.ExecuteNonQuery();


                if (recAffected > 0)
                {
                    Response.Write("<script type='text/javascript'>alert('Student Record Updated Successfully')</script>");


                }
                else
                {
                    Response.Write("<script type='text/javascript'>alert('Student Record Not Updated Successfully')</script>");
                }

            }
            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }
            finally
            {
                if (conn.State == System.Data.ConnectionState.Open)
                    conn.Close();
            }
        }
    }
}




//delete


<%@ Page Title="" Language="C#" MasterPageFile="~/Students.master" AutoEventWireup="true" CodeBehind="Stud_Delete.aspx.cs" Inherits="Question1_ASP.net_Demo.Stud_Delete" %>
<asp:Content ID="Content1" ContentPlaceHolderID="cphStud" runat="server">
    <table>
        <tr>
            <td><h1>Delete Student</h1></td>
        </tr>
        <tr>
            <td>
                <asp:Label runat="server" Text=" Enter Student Code" />
            </td>
            <td><asp:TextBox TextMode="Number" runat="server" ID="txtStudId"></asp:TextBox></td>
            </tr>
        <tr>
            <td>
                <asp:Button runat="server" ID="btnDelStud" OnClick="btnDelStud_Click" Text="Delete Student" />
            </td>
            </tr>
  </table>
</asp:Content>


//cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;

namespace Question1_ASP.net_Demo
{
    public partial class Stud_Delete : System.Web.UI.Page
    {
        SqlConnection conn = null;
        SqlDataReader dr = null;
        SqlCommand cmd = null;

        public Stud_Delete()
        {
            conn = new SqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString);
            cmd = new SqlCommand();
        }
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnDelStud_Click(object sender, EventArgs e)
        {
            Delete();

        }

        public void Delete()
        {
            try
            {
                cmd = new SqlCommand("DELETE FROM STUDENT_MASTER WHERE STUD_CODE = @id", conn);

                cmd.Parameters.AddWithValue("@id", Convert.ToInt32(txtStudId.Text));
               
                conn.Open();
                int recAffected = cmd.ExecuteNonQuery();


                if (recAffected > 0)
                {
                    Response.Write("<script type='text/javascript'>alert('Student Record Deleted Successfully')</script>");


                }
                else
                {
                    Response.Write("<script type='text/javascript'>alert('Student Record Not Deleted Successfully')</script>");
                }

            }
            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }
            finally
            {
                if (conn.State == System.Data.ConnectionState.Open)
                    conn.Close();
            }
        }
    }
}



///display




<%@ Page Title="" Language="C#" MasterPageFile="~/Students.master" AutoEventWireup="true" CodeBehind="Stud_Display.aspx.cs" Inherits="Question1_ASP.net_Demo.Stud_Display" %>
<asp:Content ID="Content1" ContentPlaceHolderID="cphStud" runat="server">
    <asp:GridView runat="server" ID="gvStud">

    </asp:GridView>
</asp:Content>




//cs


using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;


namespace Question1_ASP.net_Demo
{
    public partial class Stud_Display : System.Web.UI.Page
    {
        SqlConnection conn = null;
        SqlDataReader dr = null;
        SqlCommand cmd = null;
        protected void Page_Load(object sender, EventArgs e)
        {
            conn = new SqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString);
            cmd = new SqlCommand();

            try
            {
                cmd = new SqlCommand("SELECT * FROM STUDENT_MASTER", conn);
                conn.Open();
                dr=cmd.ExecuteReader();
                DataTable dt = new DataTable();
                if (dr.HasRows)
                    dt.Load(dr);
                conn.Close();
                gvStud.DataSource = dt;
                gvStud.DataBind();
                    
            }
            catch(Exception ex)
            {
                Response.Write(ex.Message);

            }
            finally
            {
                if (conn.State == System.Data.ConnectionState.Open)
                    conn.Close();
            }

        }
    }
}



